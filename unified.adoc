= Docs
:toc: left
:sectanchors:
:source-highlighter: highlight.js

== Databases

=== sqlite3

[source,bash]
----
# List databases
sqlite3 sqlite.db '.databases'

sqlite3 sqlite.db '.tables'

# Execute a SQL script
sqlite3 sqlite.db '.read create.sql'
----





== Data manipulation tools

=== sed

=== awk

=== jq

=== xmllint

[source,bash]
----
# Format xml file 
xmllint --format <file.xml>
----




== Docker 

[source,bash]
.Building images
----
# https://docs.docker.com/engine/reference/commandline/build/

docker build .

# Use another file than default "Dockerfile"
docker build -f <FILENAME> .

# Build and tag your image
docker build -t <TAG> .

----

[source,bash]
.Running containers
----
# https://docs.docker.com/engine/reference/run/
#   docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG...]

docker run --name <CONTAINER_NAME> -p <OUT_PORT>:<IN_PORT> -d <IMAGE>

docker run --name <CONTAINER_NAME> -p <OUT_PORT>:<IN_PORT> -e VARIABLE=xxx -d <IMAGE>
----


[source,bash]
.Pruning
----
# https://docs.docker.com/engine/reference/commandline/system_prune/

# Remove all unused images not just dangling ones
docker system prune -a

# By default, volumes are not pruned
docker system prune -a --volumes
----


== Kubernetes

=== kubeadm


=== kubectl



=== kubectx

== Network


=== nmap

[source,bash]
----
# scan the subnet for all hosts
#  -sn means there is no port scan
sudo nmap -sn 192.168.1.0/24
----


=== nmcli 

Command-line tool for controlling NetworkManager.

[source,bash]
----
# list all available wifi networks
nmcli dev wifi

# print all fields
nmcli -f ALL dev wifi
----
== Sandboxing

=== firejail


[source,bash]
.firejail
----
# opens a shell in jail
firejail

firejail <COMMAND>

firejail --noprofile <COMMAND>

# block network access 
firejail --net=none <COMMAND>

firejail --appimage <APPIMAGE>

firejail --appimage --noprofile --net=none <APPIMAGE>
----


[source,bash]
.firemon
----
# list current jails
firemon --list

firemon --tree

firemon --top
----

* https://firejail.wordpress.com/documentation-2/basic-usage/
== Shell

=== ln 

[source,bash]
----
# Create a link from DEST to SOURCE
ln -s <SOURCE> <DESTINATION>
----

== SSH

=== Generating SSH key

[source,bash]
----
# will ask location and passphrase
ssh-keygen
# creates a private and public keys in ~/.ssh
----

=== ssh-copy-id

[source,bash]
----
# Copies all the keys contained in the ssh agent - see "ssh-add -L"
ssh-copy-id <user>@<host>

# Copies the specified key
ssh-copy-id -i ~/.ssh/mykey.pub <user>@<host>

# If the server uses a different port than 22
ssh-copy-id "<user>@<host> -p <port>"
----


=== Connecting to remote host

[source,bash]
----
ssh <user>@<host>

# use a different key
ssh -i ~/.ssh/otherkey <user>@<host>
----


=== ssh config



=== sshd config



== systemd

=== journalctl

[source,bash]
----
# flush journalctl logs to keep last 2 days
journalctl --vacuum-time=2d

# flush journalctl logs to keep last 500M
journalctl --vacuum-size=500M
----

== Virtualization

=== multipass


[source,bash]
.Create a VM
----
multipass launch --name <VM_NAME>

multipass launch --name <VM_NAME> --cloud-init cloud-config.yaml


----

[source,bash]
----
multipass stop [<VM_NAME>]

multipass start <VM_NAME>

multipass delete <VM_NAME>

multipass purge
----


[source,bash]
----
# List VMs
multipass ls

# Execute a command on a specific VM
multipass exec <VM_NAME> -- <COMMAND>

----
